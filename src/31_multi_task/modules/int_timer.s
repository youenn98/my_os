;************************************************************************
;timer的中断程序
;************************************************************************
int_timer:
		pusha
		push	ds
		push	es

		;---------------------------------------
		; 设置ds和es
		;---------------------------------------
		mov		ax, 0x0010						; 
		mov		ds, ax							; 
		mov		es, ax							; 

		;---------------------------------------
		; TICK
		;---------------------------------------
		inc		dword [TIMER_COUNT]				; TIMER_COUNT++; // 中断回数更新

		;---------------------------------------
		; 中断标志位清0(EOI)
		;---------------------------------------
		outp	0x20, 0x20						; // 主PIC:EOI命令

		pop		es								; 
		pop		ds								; 
		popa

		iret

ALIGN 4, db 0
TIMER_COUNT:	dd	0

